V0.6.0 (without most new features, only outside init code) with libs and conservative approach:

ERC7540Lib: PUBLIC
VaultLib: PUBLIC
WhitelistableLib: PUBLIC
RoleLib: PUBLIC
FeeLib: PUBLIC


╭--------------------------------------------------+-----------------+--------+--------+--------+---------╮
| test/v0.6.0/VaultHelper.sol:VaultHelper Contract |                 |        |        |        |         |
+=========================================================================================================+
| Deployment Cost                                  | Deployment Size |        |        |        |         |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| 7_839_139                                        | 36_320          |        |        |        |         |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
|                                                  |                 |        |        |        |         |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| Function Name                                    | Min             | Avg    | Median | Max    | # Calls |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| MAX_MANAGEMENT_RATE                              | 2557            | 2557   | 2557   | 2557   | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| MAX_PERFORMANCE_RATE                             | 1721            | 1721   | 1721   | 1721   | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| activateWhitelist                                | 44592           | 44592  | 44592  | 44592  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| addToWhitelist                                   | 26762           | 88967  | 53553  | 210163 | 350     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| allowance                                        | 4924            | 4924   | 4924   | 4924   | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| approve                                          | 46491           | 46491  | 46491  | 46491  | 4       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| asset                                            | 910             | 2799   | 2910   | 2910   | 2821    |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| balanceOf                                        | 3570            | 3570   | 3570   | 3570   | 554     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| cancelRequestDeposit                             | 24907           | 39209  | 29315  | 66150  | 7       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| claimSharesAndRequestRedeem                      | 24552           | 108953 | 129336 | 168799 | 18      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| claimSharesOnBehalf                              | 26475           | 131034 | 131034 | 235594 | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| claimableDepositRequest                          | 7406            | 10619  | 11907  | 11907  | 54      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| claimableRedeemRequest                           | 8286            | 11014  | 10581  | 12787  | 76      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| close                                            | 23879           | 131396 | 32162  | 331179 | 44      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| convertToAssets(uint256)                         | 1890            | 2380   | 1890   | 7890   | 453     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| convertToAssets(uint256,uint256)                 | 13820           | 13820  | 13820  | 13820  | 4       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| convertToShares(uint256)                         | 3782            | 4110   | 3782   | 9782   | 146     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| convertToShares(uint256,uint256)                 | 15602           | 15602  | 15602  | 15602  | 89      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| decimals                                         | 884             | 2080   | 2884   | 2884   | 518     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| decimalsOffset                                   | 3796            | 3796   | 3796   | 3796   | 45      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| deposit(uint256,address)                         | 45802           | 71955  | 70338  | 79902  | 132     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| deposit(uint256,address,address)                 | 25290           | 54450  | 61811  | 70367  | 8       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| depositEpochId                                   | 3263            | 3263   | 3263   | 3263   | 233     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| depositSettleId                                  | 3859            | 3859   | 3859   | 3859   | 362     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| disableWhitelist                                 | 29581           | 29581  | 29581  | 29581  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| epochSettleId                                    | 3044            | 3044   | 3044   | 3044   | 18      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| expireTotalAssets                                | 24763           | 28087  | 29750  | 29750  | 3       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| feeRates                                         | 9274            | 9274   | 9274   | 9275   | 12      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| feeReceiver                                      | 4147            | 4147   | 4147   | 4147   | 23      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| feeRegistry                                      | 4103            | 4103   | 4103   | 4103   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| getRolesStorage                                  | 12514           | 12514  | 12514  | 12514  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| highWaterMark                                    | 2665            | 2665   | 2665   | 2665   | 26      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| initialize                                       | 589743          | 606503 | 611924 | 631860 | 185     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| initiateClosing                                  | 27307           | 58938  | 53677  | 142259 | 26      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| isOperator                                       | 4568            | 4568   | 4568   | 4568   | 8       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| isTotalAssetsValid                               | 2551            | 2551   | 2551   | 2551   | 80      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| isWhitelistActivated                             | 3128            | 3128   | 3128   | 3128   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| isWhitelisted                                    | 8620            | 12285  | 12945  | 12945  | 82      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| lastDepositEpochIdSettled_debug                  | 3216            | 3216   | 3216   | 3216   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| lastDepositRequestId                             | 2827            | 2827   | 2827   | 2827   | 88      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| lastDepositRequestId_debug                       | 3709            | 3709   | 3709   | 3709   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| lastFeeTime                                      | 3281            | 3281   | 3281   | 3281   | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| lastRedeemRequestId                              | 2805            | 2805   | 2805   | 2805   | 6       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| maxDeposit                                       | 11088           | 13361  | 13383  | 13383  | 106     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| maxMint                                          | 25348           | 25348  | 25348  | 25348  | 85      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| maxRedeem                                        | 14929           | 16250  | 14929  | 19367  | 5       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| maxWithdraw                                      | 25759           | 26156  | 25884  | 28054  | 29      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| mint(uint256,address)                            | 46251           | 58447  | 48704  | 80387  | 3       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| mint(uint256,address,address)                    | 26940           | 47520  | 39533  | 84076  | 4       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| newTotalAssets                                   | 2648            | 2648   | 2648   | 2648   | 394     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| owner                                            | 3640            | 3640   | 3640   | 3640   | 43      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pause                                            | 48127           | 48127  | 48127  | 48127  | 22      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| paused                                           | 3149            | 3149   | 3149   | 3149   | 461     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pendingDeposit                                   | 19639           | 19639  | 19639  | 19639  | 626     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pendingDepositRequest                            | 6353            | 8595   | 8559   | 10854  | 46      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pendingRedeem                                    | 4788            | 4788   | 4788   | 4788   | 294     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pendingRedeemRequest                             | 8421            | 10482  | 10627  | 12922  | 62      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pendingSilo                                      | 4350            | 4350   | 4350   | 4350   | 773     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| previewDeposit                                   | 2485            | 2485   | 2485   | 2485   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| previewMint                                      | 1979            | 1979   | 1979   | 1979   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| previewRedeem                                    | 967             | 967    | 967    | 967    | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| previewWithdraw                                  | 373             | 373    | 373    | 373    | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pricePerShare                                    | 9741            | 9741   | 9741   | 9741   | 10      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| protocolFeeReceiver                              | 8364            | 8364   | 8364   | 8364   | 6       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| protocolRate                                     | 14577           | 14577  | 14577  | 14577  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| redeem                                           | 31144           | 83833  | 87917  | 105017 | 36      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| redeemEpochId                                    | 3016            | 3016   | 3016   | 3016   | 75      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| redeemSettleId                                   | 3837            | 3837   | 3837   | 3837   | 366     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| requestDeposit(uint256,address,address)          | 25839           | 138896 | 147132 | 173854 | 242     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| requestDeposit(uint256,address,address,address)  | 40960           | 95608  | 95608  | 150256 | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| requestRedeem                                    | 25735           | 117729 | 127149 | 164295 | 86      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| revokeFromWhitelist                              | 26850           | 31425  | 31761  | 35328  | 4       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| safe                                             | 2695            | 2695   | 2695   | 2695   | 420     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| setOperator                                      | 24953           | 43040  | 49180  | 49180  | 14      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| settleDeposit                                    | 25771           | 250220 | 296205 | 326886 | 192     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| settleRedeem                                     | 25309           | 104070 | 36321  | 282031 | 14      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| share                                            | 1863            | 1863   | 1863   | 1863   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| state                                            | 4263            | 4263   | 4263   | 4263   | 59      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| supportsInterface                                | 464             | 559    | 559    | 654    | 6       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| syncDeposit                                      | 26364           | 99028  | 93453  | 171807 | 13      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| totalAssets                                      | 312             | 606    | 312    | 2312   | 476     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| totalAssetsExpiration                            | 2925            | 2925   | 2925   | 2925   | 5       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| totalAssetsLifespan                              | 2392            | 2392   | 2392   | 2392   | 5       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| totalSupply                                      | 582             | 1291   | 582    | 2582   | 629     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| transfer                                         | 50745           | 50745  | 50745  | 50745  | 3       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| underlyingDecimals                               | 15316           | 15316  | 15316  | 15316  | 419     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| unpause                                          | 25720           | 25720  | 25720  | 25720  | 7       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateFeeReceiver                                | 35498           | 35498  | 35498  | 35498  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateNewTotalAssets                             | 25539           | 120157 | 132526 | 140352 | 236     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateRates                                      | 28400           | 43828  | 28482  | 65287  | 7       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateTotalAssetsLifespan                        | 35137           | 51097  | 52237  | 52237  | 15      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateValuationManager                           | 24735           | 29588  | 29588  | 34442  | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateWhitelistManager                           | 35860           | 35860  | 35860  | 35860  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| valuationManager                                 | 4389            | 4389   | 4389   | 4389   | 240     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| version                                          | 1264            | 1264   | 1264   | 1264   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| whitelistManager                                 | 2821            | 2821   | 2821   | 2821   | 227     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| withdraw                                         | 26364           | 70598  | 83893  | 100753 | 17      |
╰--------------------------------------------------+-----------------+--------+--------+--------+---------╯


Ran 53 test suites in 3.63s (23.45s CPU time): 409 tests passed, 0 failed, 0 skipped (409 total tests)
