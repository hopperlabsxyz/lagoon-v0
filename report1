V0.6.0 (without most new features, only outside init code) with libs and conservative approach:

ERC7540Lib: INTERNAL
VaultLib: PUBLIC
WhitelistableLib: PUBLIC
RoleLib: PUBLIC
FeeLib: PUBLIC

╭--------------------------------------------------+-----------------+--------+--------+--------+---------╮
| test/v0.6.0/VaultHelper.sol:VaultHelper Contract |                 |        |        |        |         |
+=========================================================================================================+
| Deployment Cost                                  | Deployment Size |        |        |        |         |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| 8507426                                          | 39409           |        |        |        |         |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
|                                                  |                 |        |        |        |         |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| Function Name                                    | Min             | Avg    | Median | Max    | # Calls |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| MAX_MANAGEMENT_RATE                              | 2557            | 2557   | 2557   | 2557   | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| MAX_PERFORMANCE_RATE                             | 1721            | 1721   | 1721   | 1721   | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| activateWhitelist                                | 44592           | 44592  | 44592  | 44592  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| addToWhitelist                                   | 26762           | 88967  | 53553  | 210163 | 350     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| allowance                                        | 4924            | 4924   | 4924   | 4924   | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| approve                                          | 46491           | 46491  | 46491  | 46491  | 4       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| asset                                            | 910             | 2799   | 2910   | 2910   | 2821    |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| balanceOf                                        | 3570            | 3570   | 3570   | 3570   | 554     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| cancelRequestDeposit                             | 24907           | 39209  | 29315  | 66150  | 7       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| claimSharesAndRequestRedeem                      | 24552           | 104284 | 123658 | 162621 | 18      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| claimSharesOnBehalf                              | 26475           | 125127 | 125127 | 223780 | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| claimableDepositRequest                          | 4049            | 7262   | 8551   | 8551   | 54      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| claimableRedeemRequest                           | 4841            | 7570   | 7137   | 9343   | 76      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| close                                            | 23879           | 129257 | 30627  | 326632 | 44      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| convertToAssets(uint256)                         | 1890            | 2380   | 1890   | 7890   | 453     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| convertToAssets(uint256,uint256)                 | 10387           | 10387  | 10387  | 10387  | 4       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| convertToShares(uint256)                         | 3782            | 4110   | 3782   | 9782   | 146     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| convertToShares(uint256,uint256)                 | 12257           | 12257  | 12257  | 12257  | 89      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| decimals                                         | 884             | 2080   | 2884   | 2884   | 518     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| decimalsOffset                                   | 3796            | 3796   | 3796   | 3796   | 45      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| deposit(uint256,address)                         | 42460           | 68613  | 66996  | 76560  | 132     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| deposit(uint256,address,address)                 | 25290           | 51943  | 58469  | 67025  | 8       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| depositEpochId                                   | 3263            | 3263   | 3263   | 3263   | 233     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| depositSettleId                                  | 3859            | 3859   | 3859   | 3859   | 362     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| disableWhitelist                                 | 29581           | 29581  | 29581  | 29581  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| epochSettleId                                    | 3044            | 3044   | 3044   | 3044   | 18      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| expireTotalAssets                                | 24763           | 28087  | 29750  | 29750  | 3       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| feeRates                                         | 9274            | 9274   | 9274   | 9275   | 12      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| feeReceiver                                      | 4147            | 4147   | 4147   | 4147   | 23      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| feeRegistry                                      | 4103            | 4103   | 4103   | 4103   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| getRolesStorage                                  | 12514           | 12514  | 12514  | 12514  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| highWaterMark                                    | 2665            | 2665   | 2665   | 2665   | 26      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| initialize                                       | 589743          | 606503 | 611924 | 631860 | 185     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| initiateClosing                                  | 27307           | 58561  | 53677  | 138996 | 26      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| isOperator                                       | 4568            | 4568   | 4568   | 4568   | 8       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| isTotalAssetsValid                               | 2551            | 2551   | 2551   | 2551   | 80      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| isWhitelistActivated                             | 3128            | 3128   | 3128   | 3128   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| isWhitelisted                                    | 8620            | 12285  | 12945  | 12945  | 82      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| lastDepositEpochIdSettled_debug                  | 3216            | 3216   | 3216   | 3216   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| lastDepositRequestId                             | 2827            | 2827   | 2827   | 2827   | 88      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| lastDepositRequestId_debug                       | 3709            | 3709   | 3709   | 3709   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| lastFeeTime                                      | 3281            | 3281   | 3281   | 3281   | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| lastRedeemRequestId                              | 2805            | 2805   | 2805   | 2805   | 6       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| maxDeposit                                       | 7731            | 10005  | 10027  | 10027  | 106     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| maxMint                                          | 21150           | 21150  | 21150  | 21150  | 85      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| maxRedeem                                        | 11485           | 12806  | 11485  | 15923  | 5       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| maxWithdraw                                      | 21384           | 21975  | 21510  | 23680  | 29      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| mint(uint256,address)                            | 42825           | 55020  | 45275  | 76961  | 3       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| mint(uint256,address,address)                    | 26940           | 45806  | 37818  | 80650  | 4       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| newTotalAssets                                   | 2648            | 2648   | 2648   | 2648   | 394     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| owner                                            | 3640            | 3640   | 3640   | 3640   | 43      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pause                                            | 48127           | 48127  | 48127  | 48127  | 22      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| paused                                           | 3149            | 3149   | 3149   | 3149   | 461     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pendingDeposit                                   | 19639           | 19639  | 19639  | 19639  | 626     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pendingDepositRequest                            | 3084            | 5327   | 5290   | 7586   | 46      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pendingRedeem                                    | 4788            | 4788   | 4788   | 4788   | 294     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pendingRedeemRequest                             | 4954            | 7015   | 7160   | 9456   | 62      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pendingSilo                                      | 4350            | 4350   | 4350   | 4350   | 773     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| previewDeposit                                   | 2485            | 2485   | 2485   | 2485   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| previewMint                                      | 1979            | 1979   | 1979   | 1979   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| previewRedeem                                    | 967             | 967    | 967    | 967    | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| previewWithdraw                                  | 373             | 373    | 373    | 373    | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| pricePerShare                                    | 9741            | 9741   | 9741   | 9741   | 10      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| protocolFeeReceiver                              | 8364            | 8364   | 8364   | 8364   | 6       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| protocolRate                                     | 14577           | 14577  | 14577  | 14577  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| redeem                                           | 31144           | 80579  | 84476  | 101576 | 36      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| redeemEpochId                                    | 3016            | 3016   | 3016   | 3016   | 75      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| redeemSettleId                                   | 3837            | 3837   | 3837   | 3837   | 366     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| requestDeposit(uint256,address,address)          | 25839           | 134864 | 143013 | 168896 | 242     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| requestDeposit(uint256,address,address,address)  | 40960           | 93548  | 93548  | 146137 | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| requestRedeem                                    | 25735           | 113590 | 122744 | 158970 | 86      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| revokeFromWhitelist                              | 26850           | 31425  | 31761  | 35328  | 4       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| safe                                             | 2695            | 2695   | 2695   | 2695   | 420     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| setOperator                                      | 24953           | 43040  | 49180  | 49180  | 14      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| settleDeposit                                    | 25771           | 245906 | 291809 | 322581 | 192     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| settleRedeem                                     | 25309           | 100960 | 33288  | 278344 | 14      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| share                                            | 1863            | 1863   | 1863   | 1863   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| state                                            | 4263            | 4263   | 4263   | 4263   | 59      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| supportsInterface                                | 464             | 559    | 559    | 654    | 6       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| syncDeposit                                      | 26364           | 99028  | 93453  | 171807 | 13      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| totalAssets                                      | 312             | 606    | 312    | 2312   | 476     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| totalAssetsExpiration                            | 2925            | 2925   | 2925   | 2925   | 5       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| totalAssetsLifespan                              | 2392            | 2392   | 2392   | 2392   | 5       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| totalSupply                                      | 582             | 1291   | 582    | 2582   | 629     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| transfer                                         | 50745           | 50745  | 50745  | 50745  | 3       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| underlyingDecimals                               | 15316           | 15316  | 15316  | 15316  | 419     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| unpause                                          | 25720           | 25720  | 25720  | 25720  | 7       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateFeeReceiver                                | 35498           | 35498  | 35498  | 35498  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateNewTotalAssets                             | 25539           | 117015 | 129316 | 137142 | 236     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateRates                                      | 28400           | 43828  | 28482  | 65287  | 7       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateTotalAssetsLifespan                        | 31848           | 47808  | 48948  | 48948  | 15      |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateValuationManager                           | 24735           | 29588  | 29588  | 34442  | 2       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| updateWhitelistManager                           | 35860           | 35860  | 35860  | 35860  | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| valuationManager                                 | 4389            | 4389   | 4389   | 4389   | 240     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| version                                          | 1264            | 1264   | 1264   | 1264   | 1       |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| whitelistManager                                 | 2821            | 2821   | 2821   | 2821   | 227     |
|--------------------------------------------------+-----------------+--------+--------+--------+---------|
| withdraw                                         | 26364           | 68084  | 80452  | 97312  | 17      |
╰--------------------------------------------------+-----------------+--------+--------+--------+---------╯


Ran 53 test suites in 3.30s (23.18s CPU time): 409 tests passed, 0 failed, 0 skipped (409 total tests)
